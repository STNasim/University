#Ejercicio 1
rm(list =ls())
gc()
library(pacman)
p_load(pdftools,stringr,data.table)
#Ejercicio 3
# Instalar y cargar el paquete pdftools
# Descargar el archivo PDF desde la URL
download.file("https://bancos.salud.gob.ar/sites/default/files/2022-10/BEN_621_SE_39.pdf", "BEN_621_SE_39.pdf", mode = "wb")
# Extraer el texto del archivo PDF (página 5)
texto <- pdf_text("BEN_621_SE_39.pdf")[5]
# Separar el texto por líneas y eliminar las líneas vacías
lineas <- unlist(strsplit(texto, "\n"))
lineas <- lineas[lineas != ""]
# Obtener la tabla de datos como una matriz de caracteres
tabla <- matrix(lineas[-1], nrow = length(lineas) - 1, ncol = 7, byrow = TRUE)
# Convertir la tabla a un data frame y asignar los nombres de las columnas
tabla <- as.data.frame(tabla)
colnames(tabla) <- unlist(strsplit(lineas[1], " +"))
# Guardar la tabla de datos en un archivo CSV
write.csv(tabla, "tabla.csv")
View(tabla)
print(lineas)
print(texto)
download.file("https://bancos.salud.gob.ar/sites/default/files/2022-10/BEN_621_SE_39.pdf", "BEN_621_SE_39.pdf", mode = "wb")
# Extraer el texto del archivo PDF (página 6)
texto <- pdf_text("BEN_621_SE_39.pdf")[6]
# Separar el texto por líneas y eliminar las líneas vacías
lineas <- unlist(strsplit(texto, "\n"))
lineas <- lineas[lineas != ""]
# Obtener la tabla de datos como una matriz de caracteres
tabla <- matrix(lineas[-1], nrow = length(lineas) - 1, ncol = 7, byrow = TRUE)
# Convertir la tabla a un data frame y asignar los nombres de las columnas
tabla <- as.data.frame(tabla)
colnames(tabla) <- unlist(strsplit(lineas[1], " +"))
# Guardar la tabla de datos en un archivo CSV
write.csv(tabla, "tabla.csv")
install.packages("tabulizer")
library(tabulizer)
# Extraer el texto del archivo PDF (página 6)
datos <- pdf_text("BEN_621_SE_39.pdf")
pritn(datos)
print(datos)
# Extraer el texto del archivo PDF (página 6)
datos <- pdf_text("BEN_621_SE_39.pdf")[11]
print(datos)
# Extraer el texto del archivo PDF (página 6)
datos <- pdf_text("https://bancos.salud.gob.ar/sites/default/files/2022-10/BEN_621_SE_39.pdf")[11]
print(datos)
# Extraer el texto del archivo PDF (página 11)
datos <- pdf_text("https://bancos.salud.gob.ar/sites/default/files/2022-10/BEN_621_SE_39.pdf")[11]
print(datos)
datos2 <- strsplit(datos, "\n")
# Queda en forma de lista, así que nos quedamos con el primer elemento
datos2 <- datos2[[1]]
print(datos2)
# Eliminamos los espacios en blanco al inicio y final de las cadenas filas
datos2 <- trimws(datos2)
head(datos2)
print(datos2)
# Nos quedamos con las filas que necesitamos: desde "Miami" hasta
# "Natiowide Total"
# Con grep() encontramos las posiciones que queremos
ini <- grep("Región de África", datos2)
fin <- grep("Región del Pacífico Occidental", datos2)
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,",")
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla1,ncol=3))
# Le damos los nombres
colnames(tabla3) <- c("Región","Casos","Fallecidos")
print(tabla3)
View(tabla3)
print(tabla2)
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
print(tabla2)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,",")
print(tabla2)
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,".")
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla1,ncol=3))
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
print(tabla2)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,".")
print(tabla2)
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,"")
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,"\\.")
print(tabla2)
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,"\.")
print(tabla2)
# Como los números aparece con la "," como divisor de miles, la eliminamos
tabla2 <- str_remove_all(tabla2,"\\.")
print(tabla2)
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_remove_all(tabla2,"\\.")
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla1,ncol=3))
# Le damos los nombres
colnames(tabla3) <- c("Región","Casos","Fallecidos")
# Vemos los tipos de datos
print(tabla3)
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla1,ncol=3))
View(tabla3)
View(tabla3)
tabla1 <- datos2[ini:fin]
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_remove_all(tabla2,"\\.")
tabla2 <- str_remove_all(tabla2,",")
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla1,ncol=3))
# Le damos los nombres
colnames(tabla3) <- c("Región","Casos","Fallecidos")
# Vemos los tipos de datos
print(tabla3)
print(tabla1)
# Vamos a dividir las cadenas de las filas en 10 columnas y usamos como
# patrón en espacio " ", pero que aparezca 2 o más veces
tabla2 <- str_remove_all(tabla2,"\\.")
tabla2 <- str_remove_all(tabla2,",")
tabla2 <- str_split_fixed(tabla1, " {2,}", 3)
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla2,ncol=3))
# Le damos los nombres
colnames(tabla3) <- c("Región","Casos","Fallecidos")
# Vemos los tipos de datos
print(tabla3)
str(tabla1)
str(tabla3)
# Guardar la tabla de datos en un archivo CSV
write.csv(tabla3, "tablaej3.csv")
print(tabla2)
# Armamos un dataframe
tabla3 <- data.frame(matrix(tabla2,ncol=3))
# Le damos los nombres
colnames(tabla3) <- c("Región","Casos","Fallecidos")
# Vemos los tipos de datos
print(tabla3)
str(tabla3)
# Cambiamos los tipos de datos
tabla3$AgentStaffing <- as.numeric(tabla3$AgentStaffing)
tabla3$Apprehensions <- as.numeric(tabla3$Apprehensions)
str(tabla3)
print(tabla3)
# Guardar la tabla de datos en un archivo CSV
write.csv(tabla3, "tablaej3.csv")
# Guardar la tabla de datos en un archivo CSV
write.csv(tabla3, "tablaej3.csv", sep=";")
# Guardar la tabla de datos en un archivo CSV
write.csv(tabla3, "tablaej3.csv", sep = ";")
# Guardar la tabla de datos en un archivo CSV
write.excel(tabla3, "tablaej3.csv", sep = ";")
# Guardar la tabla de datos en un archivo CSV
write_excel(tabla3, "tablaej3.csv", sep = ";")
# Guardar la tabla de datos en un archivo CSV
fwrite(tabla3, "tablaej3.csv", sep = ";")
# Cambiamos los tipos de datos
tabla3$AgentStaffing <- as.numeric(tabla3$Casos)
tabla3$Apprehensions <- as.numeric(tabla3$Fallecidos)
str(tabla3)
# Cambiamos los tipos de datos
tabla3$Casos <- as.numeric(tabla3$Casos)
tabla3$Fallecidos <- as.numeric(tabla3$Fallecidos)
str(tabla3)
